CREATE DATABASE ENTREGAS
CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci;

USE ENTREGAS;

CREATE TABLE HERRAMIENTA ( 
	CODIGO CHAR(6) NOT NULL PRIMARY KEY, 
	DESCRIPCION VARCHAR(35) DEFAULT ' ', 
	PRECIO DECIMAL(4,1) DEFAULT 0.0 
) ENGINE = InnoDB;


CREATE TABLE ALMACEN ( 
	CODIGO CHAR(6) NOT NULL PRIMARY KEY, 
	CENTRADA SMALLINT UNSIGNED DEFAULT 0, 
	CSALIDA SMALLINT UNSIGNED DEFAULT 0,
	CSALDO SMALLINT UNSIGNED DEFAULT 0, 
	FOREIGN KEY (CODIGO) REFERENCES HERRAMIENTA(CODIGO) 
) ENGINE = InnoDB;


CREATE TABLE ENTREGA ( 
	NE SMALLINT AUTO_INCREMENT PRIMARY KEY, 
	FECHA DATETIME DEFAULT NOW(), 
	CANTIDAD SMALLINT DEFAULT 0, 
	CODIGO CHAR(6), 
	FOREIGN KEY (CODIGO) REFERENCES HERRAMIENTA(CODIGO) 
) ENGINE = InnoDB AUTO_INCREMENT=1;


INSERT INTO HERRAMIENTA VALUES 
('H-0001','ALICATE DE PUNTA', 15.0),
('H-0002','DESARMADOR ESTRELLA', 18.0),
('H-0003','MARTILLO', 25.0),
('H-0004','TALADRO ELECTRICO', 120.0),
('H-0005','SIERRA MECANICA', 70.0);

INSERT INTO ALMACEN VALUES 
('H-0001',100,80,20),
('H-0002',200, 120, 80),
('H-0003',500, 300, 200),
('H-0004',50, 40,10),
('H-0005',80, 50, 30);

INSERT INTO ENTREGA (FECHA,CANTIDAD,CODIGO) VALUES 
(NOW(), 10, 'H-0001'),
(NOW(), 5, 'H-0003'),
(NOW(), 2, 'H-0004'),
(NOW(), 15, 'H-0002'),
(NOW(), 8, 'H-0005'),
(NOW(), 4, 'H-0001');

INSERT INTO ENTREGA (FECHA,CANTIDAD,CODIGO) VALUES 
(NOW(), 10, 'H-0001'),
(NOW(), 5, 'H-0003'),
(NOW(), 2, 'H-0004'),
(NOW(), 15, 'H-0002'),
(NOW(), 8, 'H-0005'),
(NOW(), 4, 'H-0001');

-- ---------------------------------------




